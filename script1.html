<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"></head>
<body><script>
// 检查是否为Roblox Executor
function isRobloxExecutor() {
    const userAgent = navigator.userAgent.toLowerCase();
    const robloxKeywords = ['roblox', 'executor', 'synapse', 'krnl', 'oxygen', 'sentinel'];
    return robloxKeywords.some(keyword => userAgent.includes(keyword)) || 
           window.location.search.includes('executor=true');
}

// 检查登录状态
function checkAuth() {
    if (isRobloxExecutor()) return true;
    return sessionStorage.getItem('authenticated') === 'true';
}

// 立即执行
(async function() {
    if (!checkAuth()) {
        document.body.innerHTML = '';
        document.write('-- 访问被拒绝：需要登录授权');
        return;
    }
    
    try {
        const response = await fetch('https://api.github.com/repos/Yyds76/Yyds76.github.io/contents');
        const files = await response.json();
        const luaFiles = files.filter(file => file.type === 'file' && file.name.endsWith('.lua'));
        
        if (luaFiles.length > 0) {
            const fileResponse = await fetch(luaFiles[0].download_url);
            const content = await fileResponse.text();
            document.body.innerHTML = '';
            document.write(content);
        } else {
            document.body.innerHTML = '';
            document.write('-- 错误：未找到Lua文件');
        }
    } catch (error) {
        document.body.innerHTML = '';
        document.write('-- 错误：' + error.message);
    }
})();
</script></body>
</html>
